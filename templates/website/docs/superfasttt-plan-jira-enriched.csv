Issue Type,Summary,Description,Epic Link,Status,Priority,Story Points,Labels,Component,Sprint,Dependencies
Epic,Étape 0 – Préparation environnement local,Créer un environnement de développement reproductible pour tous les membres de l'équipe.,,À faire,High,,,infrastructure,0,
Task,0.1 Setup développeur,Préparer le poste développeur avec les outils requis.,Étape 0 – Préparation environnement local,À faire,High,3,devops,tools,1,
Sub-task,Installer Docker Desktop,"Installer et configurer Docker Desktop pour exécuter les conteneurs localement. **Critères d'acceptation:** Docker Desktop installé et fonctionnel, docker-compose disponible, capacité de lancer des conteneurs",Étape 0 – Préparation environnement local,À faire,Low,1,devops,tools,1,
Sub-task,Installer VS Code et extensions,"Installer VS Code et les extensions essentielles (Python, Docker, Terraform, PostgreSQL, REST Client). **Critères d'acceptation:** VS Code configuré avec toutes les extensions listées dans .vscode/extensions.json",Étape 0 – Préparation environnement local,À faire,Low,1,devops,tools,1,
Sub-task,Créer comptes Scaleway et GitHub,"Créer et configurer les comptes Scaleway et GitHub et vérifier l'accès. **Critères d'acceptation:** Accès confirmé aux 2 plateformes, clés API générées et testées",Étape 0 – Préparation environnement local,À faire,Low,1,devops infrastructure,infrastructure,1,
Sub-task,Installer les CLI nécessaires,"Installer terraform, scaleway-cli, docker-compose et psql pour les opérations locales. **Critères d'acceptation:** Tous les CLI installés et accessibles via PATH, versions compatibles validées",Étape 0 – Préparation environnement local,À faire,Low,1,devops,tools,1,
Task,0.2 Environnement local complet,"Définir la stack docker-compose et l'environnement .env.local. **Fichiers concernés:** docker-compose.yml, .env.example",Étape 0 – Préparation environnement local,À faire,High,5,infrastructure devops,tools,1,
Sub-task,Définir services docker-compose,"Ajouter Postgres (avec pgvector), MinIO, Redis, LiteLLM Proxy et Mailhog pour l'environnement local. **Fichier:** docker-compose.yml. **Critères:** Tous les services définis avec health checks, volumes persistants, réseau privé",Étape 0 – Préparation environnement local,À faire,Low,2,infrastructure database,tools,1,
Sub-task,Configurer .env.local,"Définir les variables DATABASE_URL, S3_ENDPOINT, JWT_SECRET, OPENAI_API_KEY, ANTHROPIC_API_KEY, VECTOR_STORE, QDRANT_URL, QDRANT_API_KEY. **Fichier:** .env.example. **Critères:** Toutes les variables documentées avec exemples",Étape 0 – Préparation environnement local,À faire,Low,1,devops,tools,1,
Sub-task,Ajouter Makefile,"Proposer des commandes standard pour démarrer, tester, migrer et nettoyer la stack locale. **Fichier:** Makefile. **Critères:** Au moins 15 commandes utiles (up, down, logs, migrate, test, clean, etc.)",Étape 0 – Préparation environnement local,À faire,Low,2,devops,tools,1,
Task,0.3 Validation connexions,Valider que tous les services locaux répondent correctement.,Étape 0 – Préparation environnement local,À faire,High,3,tests infrastructure,tools,1,0.2
Sub-task,Valider connexion PostgreSQL,"Vérifier que PostgreSQL répond et que l'extension pgvector est active. **Commande:** psql -c 'SELECT * FROM pg_extension WHERE extname=''vector'''. **Critères:** Connexion établie, extension vector présente",Étape 0 – Préparation environnement local,À faire,Low,1,database tests,apps/api,1,
Sub-task,Valider upload S3 MinIO,"Vérifier qu'un fichier peut être envoyé et listé avec MinIO. **Outil:** mc (MinIO Client). **Critères:** Upload réussi, fichier visible dans console MinIO",Étape 0 – Préparation environnement local,À faire,Low,1,infrastructure tests,apps/api,1,
Sub-task,Valider Redis,"Vérifier que Redis répond à un ping et stocke des clés temporaires. **Commande:** redis-cli ping. **Critères:** PONG reçu, SET/GET fonctionnels",Étape 0 – Préparation environnement local,À faire,Low,1,infrastructure tests,apps/api,1,
Sub-task,Valider Qdrant (option),"Vérifier que Qdrant est accessible et que l'on peut créer et lister une collection. **API:** http://localhost:6333/collections. **Critères:** API répond, collection créée et listée",Étape 0 – Préparation environnement local,À faire,Low,1,ai tests,apps/api,1,
Epic,Étape 1 – Infrastructure,"Mettre en place l'infrastructure initiale, la structure du monorepo, le déploiement Scaleway et le CI/CD de base.",,À faire,High,,,infrastructure,0,
Task,1.1 Compte et configuration Scaleway,"Configurer l'accès Scaleway et activer Compute, Object Storage et PostgreSQL.",Étape 1 – Infrastructure,À faire,High,3,infrastructure devops,infrastructure,1,
Sub-task,Créer clés d'accès Scaleway,Créer les clés d'accès et vérifier les permissions d'automatisation. **Console:** console.scaleway.com. **Critères:** Clés API générées avec permissions suffisantes pour terraform,Étape 1 – Infrastructure,À faire,Low,1,infrastructure,infrastructure,1,
Sub-task,Configurer scaleway-cli,"Configurer scaleway-cli avec la région cible (fr-par ou nl-ams) et valider la connexion. **Commande:** scw init. **Critères:** CLI configuré, scw instance server list fonctionne",Étape 1 – Infrastructure,À faire,Low,1,devops,infrastructure,1,
Sub-task,Activer services requis,"Activer Compute, Object Storage, PostgreSQL et Cockpit au besoin. **Critères:** Tous les services activés dans le projet Scaleway",Étape 1 – Infrastructure,À faire,Low,1,infrastructure,infrastructure,1,
Task,1.2 Monorepo GitHub,"Créer la structure du monorepo pour backend, frontend, infrastructure, scripts et docs. **Référence:** README.md structure",Étape 1 – Infrastructure,À faire,High,5,devops,root,1,
Sub-task,Initialiser arborescence,"Créer les dossiers apps/, packages/, integrations/, infrastructure/, scripts/, docs/, tools/ selon README.md. **Critères:** Structure complète créée avec README.md dans chaque dossier principal",Étape 1 – Infrastructure,À faire,Low,2,devops,root,1,
Sub-task,Configurer workflows GitHub,"Ajouter les workflows CI et déploiement dans .github/workflows/. **Fichiers:** ci.yml, deploy.yml. **Critères:** Workflows pour lint, test, build, deploy configurés",Étape 1 – Infrastructure,À faire,Low,2,devops,root,1,
Sub-task,Ajouter README et contribution,"Ajouter un README initial et un guide de contribution (CONTRIBUTING.md). **Critères:** README avec quick start, CONTRIBUTING avec conventions de code",Étape 1 – Infrastructure,À faire,Low,1,docs,root,1,
Task,1.3 Next.js Admin + FastAPI + Dockerfile,"Préparer l'application Next.js Admin et FastAPI avec leurs Dockerfiles. **Dossiers:** apps/api, apps/admin",Étape 1 – Infrastructure,À faire,High,6,backend frontend,apps,2,1.2
Sub-task,Créer application Next.js Admin,"Créer l'interface admin Next.js. **Dossier:** apps/admin. **Stack:** Next.js 14, TypeScript, TailwindCSS, shadcn/ui. **Critères:** App admin créée, layout de base",Étape 1 – Infrastructure,À faire,Low,2,frontend,apps/admin,2,
Sub-task,Créer API FastAPI,"Créer une API FastAPI exposant /health et la documentation OpenAPI à /docs. **Dossier:** apps/api. **Fichier:** apps/api/main.py. **Critères:** API démarrée, /health retourne 200, /docs accessible",Étape 1 – Infrastructure,À faire,Low,2,backend,apps/api,2,
Sub-task,Créer Dockerfiles,"Créer des Dockerfiles reproductibles pour backend et frontend. **Fichiers:** apps/api/Dockerfile, apps/admin/Dockerfile. **Critères:** Build réussi, images optimisées multi-stage",Étape 1 – Infrastructure,À faire,Low,2,devops,apps,2,
Task,1.4 Tests locaux de base,Valider l'exécution des services en local avant déploiement.,Étape 1 – Infrastructure,À faire,High,2,tests,apps,2,1.3
Sub-task,Valider Next.js Admin local,"Vérifier que l'interface admin est accessible (http://localhost:3000). **Critères:** Page chargée, layout visible",Étape 1 – Infrastructure,À faire,Low,1,frontend tests,apps/admin,2,
Sub-task,Valider FastAPI local,"Vérifier que l'API /health répond et que /docs s'affiche correctement (http://localhost:8000). **Critères:** API répond 200, OpenAPI docs générés",Étape 1 – Infrastructure,À faire,Low,1,backend tests,apps/api,2,
Task,1.5 Terraform Scaleway,Définir l'infrastructure cible via Terraform pour déploiement sur Scaleway. **Dossier:** infrastructure/,Étape 1 – Infrastructure,À faire,High,8,infrastructure,infrastructure,2,
Sub-task,Définir instance Compute,"Choisir un type d'instance adapté au besoin de performance (PLAY2-PICO pour dev, PRO2 pour prod). **Fichier:** infrastructure/modules/compute/main.tf. **Critères:** Module terraform pour instance avec cloud-init",Étape 1 – Infrastructure,À faire,Low,2,infrastructure,infrastructure,2,
Sub-task,Définir Object Storage,Créer un bucket S3 pour les fichiers applicatifs et tests. **Fichier:** infrastructure/modules/storage/main.tf. **Critères:** Module terraform pour bucket S3 avec versioning,Étape 1 – Infrastructure,À faire,Low,2,infrastructure,infrastructure,2,
Sub-task,Définir base PostgreSQL,Paramétrer une base PostgreSQL managée ou autogérée selon l'option choisie. **Fichier:** infrastructure/modules/database/main.tf. **Critères:** 2 modules (managed et local) avec variable de choix,Étape 1 – Infrastructure,À faire,Low,2,infrastructure database,infrastructure,2,
Sub-task,Définir réseau et DNS,"Créer le réseau privé et les enregistrements DNS nécessaires. **Fichier:** infrastructure/modules/network/main.tf. **Critères:** VPC privé, DNS records pour sous-domaine",Étape 1 – Infrastructure,À faire,Low,2,infrastructure,infrastructure,2,
Task,1.6 Déploiement Hello World,Déployer la première version pour valider la chaîne CI → infra.,Étape 1 – Infrastructure,À faire,High,5,infrastructure devops,infrastructure,3,1.5
Sub-task,Exécuter Terraform,"Exécuter init, plan et apply pour provisionner l'infrastructure de test. **Commandes:** terraform init/plan/apply. **Critères:** Infrastructure provisionnée sans erreur",Étape 1 – Infrastructure,À faire,Low,2,infrastructure,infrastructure,3,
Sub-task,Vérifier accès public,Valider l'accès public à l'application déployée via IP publique. **Critères:** Application accessible via HTTPS,Étape 1 – Infrastructure,À faire,Low,1,infrastructure tests,infrastructure,3,
Sub-task,Configurer DNS,"Associer un sous-domaine de test (dev.superfasttt.com) et vérifier la résolution. **Critères:** DNS résout correctement, certificat SSL actif",Étape 1 – Infrastructure,À faire,Low,2,infrastructure,infrastructure,3,
Task,1.7 CI/CD basique,"Mettre en place lint, tests et build/push des images. **Dossier:** .github/workflows/",Étape 1 – Infrastructure,À faire,High,5,devops tests,root,3,
Sub-task,Configurer lint et tests,"Configurer ruff/eslint, pytest/jest et valider l'exécution en CI. **Fichiers:** .github/workflows/ci.yml, pyproject.toml, .eslintrc. **Critères:** CI exécute lint + tests sur chaque PR",Étape 1 – Infrastructure,À faire,Low,2,devops tests,root,3,
Sub-task,Construire et pousser images,Construire les images Docker et les pousser vers le registry (Scaleway Registry). **Workflow:** .github/workflows/build.yml. **Critères:** Images buildées et pushées automatiquement,Étape 1 – Infrastructure,À faire,Low,2,devops,root,3,
Sub-task,Déploiement sur tag,Déclencher un déploiement de staging lorsqu'un tag v* est publié. **Workflow:** .github/workflows/deploy.yml. **Critères:** Tag v0.1.0 déclenche déploiement auto,Étape 1 – Infrastructure,À faire,Low,1,devops,root,3,
Task,1.8 Gestion des secrets,Centraliser et sécuriser les secrets applicatifs via Scaleway Secret Manager ou variables GitHub.,Étape 1 – Infrastructure,À faire,High,3,security devops,infrastructure,3,
Sub-task,Créer namespace secrets,"Créer un namespace dans Secret Manager pour stocker les secrets critiques (JWT_SECRET, DB credentials, API keys). **Critères:** Namespace créé, secrets de test ajoutés",Étape 1 – Infrastructure,À faire,Low,1,security,infrastructure,3,
Sub-task,Brancher récupération secrets,"Permettre aux apps de charger les secrets au démarrage depuis Secret Manager ou GitHub Secrets. **Code:** apps/api/core/config.py. **Critères:** Secrets chargés dynamiquement, aucun secret en dur",Étape 1 – Infrastructure,À faire,Low,2,security backend,apps/api,3,
Sub-task,Valider rotation manuelle,"Vérifier qu'une rotation manuelle de JWT_SECRET n'interrompt pas le service. **Critères:** Secret roté, app redémarrée, service fonctionnel",Étape 1 – Infrastructure,À faire,Low,1,security tests,apps/api,3,
Epic,Étape 2 – Backend de base,"Structurer le backend FastAPI avec PostgreSQL, stockage S3 et authentification de base.",,À faire,High,,,backend,0,
Task,2.1 Structure FastAPI core/,"Organiser le projet FastAPI avec modules core, api, config et tests. **Dossier:** apps/api/",Étape 2 – Backend de base,À faire,High,5,backend,apps/api,4,1.3
Sub-task,Initialiser configuration,"Créer la configuration applicative basée sur variables d'environnement avec Pydantic Settings. **Fichier:** apps/api/core/config.py. **Critères:** Classe Settings avec toutes les variables, validation types",Étape 2 – Backend de base,À faire,Low,2,backend,apps/api,4,
Sub-task,Définir modules core,"Créer core/auth, core/database, core/storage, core/llm et leurs dépendances. **Dossiers:** apps/api/core/*. **Critères:** Structure modulaire créée, __init__.py dans chaque module",Étape 2 – Backend de base,À faire,Low,2,backend,apps/api,4,
Sub-task,Ajouter tests initiaux,"Créer des tests unitaires de base pour les modules critiques (config, database). **Dossier:** apps/api/tests/. **Critères:** Au moins 5 tests passent, couverture >50%",Étape 2 – Backend de base,À faire,Low,1,backend tests,apps/api,4,
Task,2.2 PostgreSQL + Alembic + pgvector,Configurer les migrations et activer pgvector pour les embeddings. **Référence:** VISION.md section Database,Étape 2 – Backend de base,À faire,High,5,database backend,apps/api,4,
Sub-task,Initialiser Alembic,"Initialiser Alembic et créer la première migration (init schema). **Commande:** alembic init migrations. **Fichier:** apps/api/alembic.ini. **Critères:** Alembic configuré, migration 001_init.py créée",Étape 2 – Backend de base,À faire,Low,2,database,apps/api,4,
Sub-task,Activer pgvector,"Activer l'extension pgvector sur la base de développement. **SQL:** CREATE EXTENSION IF NOT EXISTS vector. **Critères:** Extension installée, type vector disponible",Étape 2 – Backend de base,À faire,Low,1,database,apps/api,4,
Sub-task,Créer tables de base,"Créer les tables users, tenants et api_keys via les migrations Alembic. **Fichier:** migrations/versions/002_base_tables.py. **Critères:** Tables créées avec indexes, contraintes FK",Étape 2 – Backend de base,À faire,Low,2,database,apps/api,4,
Task,2.3 Schémas tenants et isolation,Mettre en place des schémas séparés et des permissions strictes par tenant. **Référence:** VISION.md section Multi-Tenant,Étape 2 – Backend de base,À faire,High,8,database security backend,apps/api,4,
Sub-task,Créer schémas de test,"Créer deux schémas de test (tenant_a, tenant_b) pour valider l'isolation. **SQL:** CREATE SCHEMA tenant_a. **Critères:** 2 schémas créés, isolation testée",Étape 2 – Backend de base,À faire,Low,2,database,apps/api,4,
Sub-task,Créer utilisateurs DB dédiés,"Créer des utilisateurs DB spécifiques à chaque schéma avec permissions restreintes. **SQL:** CREATE USER tenant_a_user WITH PASSWORD. **Critères:** Users créés, GRANT sur schéma uniquement",Étape 2 – Backend de base,À faire,Low,2,database security,apps/api,4,
Sub-task,Valider isolation SQL,"Vérifier qu'un utilisateur ne peut pas accéder au schéma d'un autre tenant. **Test:** Connexion avec user A, SELECT sur schema B. **Critères:** Erreur permission denied",Étape 2 – Backend de base,À faire,Low,1,database security tests,apps/api,4,
Task,2.4 Stockage S3 MinIO,"Implémenter un gestionnaire S3 pour upload, download et listing sécurisés. **Fichier:** apps/api/core/storage.py",Étape 2 – Backend de base,À faire,High,5,backend infrastructure,apps/api,5,
Sub-task,Créer buckets de test,"Créer un bucket par tenant pour simuler l'isolation de stockage. **Lib:** boto3. **Critères:** Buckets tenant-a-docs, tenant-b-docs créés",Étape 2 – Backend de base,À faire,Low,1,infrastructure,apps/api,5,
Sub-task,Activer chiffrement server-side,"Activer le chiffrement côté serveur sur les buckets (SSE-S3). **Config:** PutBucketEncryption. **Critères:** Chiffrement activé, vérifié via GetBucketEncryption",Étape 2 – Backend de base,À faire,Low,1,security infrastructure,apps/api,5,
Sub-task,Valider opérations S3,"Vérifier upload, download et listing sur chaque bucket. **Code:** Tests avec boto3. **Critères:** 3 opérations fonctionnelles, fichiers isolés par tenant",Étape 2 – Backend de base,À faire,Low,2,backend tests,apps/api,5,
Task,2.5 Authentification JWT,Mettre en place un mécanisme d'authentification par JWT pour sécuriser l'API. **Référence:** VISION.md section Auth,Étape 2 – Backend de base,À faire,High,8,backend security,apps/api,5,
Sub-task,Créer génération de token,Créer la génération et la vérification des tokens JWT avec python-jose. **Fichier:** apps/api/core/auth/jwt.py. **Critères:** Fonctions create_token et verify_token fonctionnelles,Étape 2 – Backend de base,À faire,Low,3,backend security,apps/api,5,
Sub-task,Protéger endpoints sensibles,"Protéger les endpoints nécessitant authentification avec dependency get_current_user. **Fichier:** apps/api/core/auth/dependencies.py. **Critères:** Dependency créé, endpoint test protégé",Étape 2 – Backend de base,À faire,Low,2,backend security,apps/api,5,
Sub-task,Valider flux d'authentification,"Vérifier login, accès à /me et gestion d'erreurs (token expiré, invalide). **Tests:** test_auth.py. **Critères:** 5 tests passent (login, access, expired, invalid, missing)",Étape 2 – Backend de base,À faire,Low,2,backend tests,apps/api,5,
Task,2.6 Tests API et documentation,Documenter automatiquement l'API et fournir une collection de tests. **Référence:** README.md section Documentation,Étape 2 – Backend de base,À faire,High,3,backend docs tests,apps/api,5,
Sub-task,Configurer OpenAPI,"Configurer la doc OpenAPI et exposer /docs (Swagger) et /redoc. **Config:** FastAPI(docs_url, redoc_url). **Critères:** Docs accessibles, tous les endpoints documentés",Étape 2 – Backend de base,À faire,Low,1,backend docs,apps/api,5,
Sub-task,Créer collection de tests,Créer une collection de requêtes HTTP pour tester les endpoints clés (REST Client ou Postman). **Fichier:** apps/api/tests/api.http. **Critères:** Collection avec 10+ requêtes,Étape 2 – Backend de base,À faire,Low,1,tests docs,apps/api,5,
Sub-task,Exporter openapi.json,"Exporter le fichier OpenAPI et l'ajouter au dépôt pour versionner l'API. **Commande:** curl /openapi.json > docs/api/openapi.json. **Critères:** Fichier exporté, ajouté à git",Étape 2 – Backend de base,À faire,Low,1,docs,apps/api,5,
Epic,Étape 3 – Couche IA : LiteLLM + Journalisation,Ajouter une couche d'orchestration LLM multi-fournisseurs et tracer les usages en base.,,À faire,High,,,ai,0,
Task,3.1 Installer et configurer LiteLLM,Installer LiteLLM Proxy et préparer la configuration des modèles. **Référence:** VISION.md section Gestion multi-LLM,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,High,5,ai backend,apps/api,6,2.1
Sub-task,Définir litellm_config,"Définir les modèles supportés et les clés d'API associées dans litellm_config.yaml. **Fichier:** apps/api/litellm_config.yaml. **Modèles:** gpt-4o-mini, claude-3-sonnet, mistral-small. **Critères:** Config avec 3+ modèles",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,2,ai,apps/api,6,
Sub-task,Démarrer proxy LiteLLM,"Démarrer le proxy dans docker-compose et vérifier sa disponibilité locale. **Service:** litellm dans docker-compose.yml. **Critères:** Proxy démarré sur port 4000, /health répond",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai infrastructure,tools,6,
Sub-task,Tester appels simples,"Valider qu'un appel simple retourne une réponse pour chaque modèle configuré. **Code:** Test avec requests vers http://localhost:4000/chat/completions. **Critères:** 3 modèles testés, réponses valides",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,2,ai tests,apps/api,6,
Task,3.2 Client LLM unifié,Exposer un client interne unique pour appeler les modèles via LiteLLM. **Fichier:** apps/api/core/llm/client.py,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,High,5,ai backend,apps/api,6,3.1
Sub-task,Créer client HTTP asynchrone,"Créer un client HTTP asynchrone unifié avec paramètres standard (model, messages, temperature). **Lib:** httpx. **Critères:** Classe LLMClient avec méthode call_async",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,3,ai backend,apps/api,6,
Sub-task,Gérer métadonnées d'usage,Transmettre le tenant_id pour faciliter le suivi et l'audit dans les headers. **Header:** X-Tenant-ID. **Critères:** Metadata inclus dans chaque requête,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai backend,apps/api,6,
Sub-task,Valider timeouts et erreurs,"Vérifier la résilience aux erreurs réseau et le respect des timeouts (30s). **Tests:** test_llm_errors.py. **Critères:** Gestion timeout, retry logic, erreurs loggées",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai tests,apps/api,6,
Task,3.3 Table de journalisation LLM,"Créer une table d'usage pour tracer tokens, coûts, latences et modèles. **Référence:** VISION.md section Journalisation",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,High,5,ai database backend,apps/api,6,
Sub-task,Définir schéma de la table,"Définir les colonnes et index nécessaires pour l'analyse des usages (llm_usage). **Migration:** 003_llm_usage.py. **Colonnes:** id, tenant_id, model, tokens_in, tokens_out, cost, latency_ms, created_at. **Critères:** Table créée avec index",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,2,database,apps/api,6,
Sub-task,Enregistrer chaque appel,Enregistrer systématiquement les appels avec les métriques clés dans la table. **Code:** Middleware ou decorator. **Critères:** Chaque appel LLM enregistré automatiquement,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,2,ai backend,apps/api,6,
Sub-task,Calculer coûts estimés,Calculer les coûts estimés par modèle à partir des tokens (prix/1M tokens). **Code:** Fonction calculate_cost. **Critères:** Coûts calculés pour 3+ modèles,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai backend,apps/api,6,
Task,3.4 Tests multi-fournisseurs,"Valider les appels OpenAI, Anthropic et Mistral depuis le client unifié.",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,High,3,ai tests,apps/api,7,3.2
Sub-task,Tester modèle OpenAI,"Valider un appel simple au modèle OpenAI configuré (gpt-4o-mini). **Test:** test_openai.py. **Critères:** Appel réussi, réponse cohérente, tokens comptés",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai tests,apps/api,7,
Sub-task,Tester modèle Anthropic,"Valider un appel simple au modèle Anthropic configuré (claude-3-sonnet). **Test:** test_anthropic.py. **Critères:** Appel réussi, format réponse correct",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai tests,apps/api,7,
Sub-task,Tester modèle Mistral,"Valider un appel simple au modèle Mistral configuré (mistral-small). **Test:** test_mistral.py. **Critères:** Appel réussi, latence mesurée",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai tests,apps/api,7,
Task,3.5 Isolation par tenant,Valider que les logs d'usage et les clés API sont isolés par tenant.,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,High,3,ai security tests,apps/api,7,3.3
Sub-task,Tester clés par tenant,Valider que chaque tenant peut utiliser ses propres clés API LLM. **Config:** Clés dans tenant settings. **Critères:** 2 tenants avec clés différentes testés,Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,2,ai security,apps/api,7,
Sub-task,Vérifier séparation des logs,"S'assurer que les enregistrements d'usage sont filtrés par tenant_id. **Query:** SELECT * FROM llm_usage WHERE tenant_id. **Critères:** Logs isolés, pas de fuite cross-tenant",Étape 3 – Couche IA : LiteLLM + Journalisation,À faire,Low,1,ai security tests,apps/api,7,
Epic,Étape 4 – Couche RAG,Construire le pipeline d'ingestion multi-formats et la recherche sémantique avec génération de réponses sourcées.,,À faire,High,,,ai,0,
Task,4.1 Installer LlamaIndex,Installer LlamaIndex et ses connecteurs de vector stores et embeddings. **Référence:** VISION.md section RAG,Étape 4 – Couche RAG,À faire,High,3,ai backend,apps/api,8,3.2
Sub-task,Installer dépendances vector stores,"Installer les modules pour Postgres/pgvector et Qdrant. **Packages:** llama-index-vector-stores-postgres, llama-index-vector-stores-qdrant. **Critères:** Packages installés dans requirements.txt",Étape 4 – Couche RAG,À faire,Low,1,ai,apps/api,8,
Sub-task,Installer loaders de documents,"Installer les loaders PDF, DOCX et TXT pour l'ingestion. **Packages:** llama-index-readers-file. **Critères:** Loaders disponibles, import réussi",Étape 4 – Couche RAG,À faire,Low,1,ai,apps/api,8,
Task,4.2 Indexation de documents,"Implémenter l'ingestion, le chunking et l'indexation des documents avec métadonnées. **Fichier:** apps/api/core/rag/indexer.py",Étape 4 – Couche RAG,À faire,High,8,ai backend,apps/api,8,4.1
Sub-task,Charger documents,Permettre le chargement de fichiers depuis un chemin local ou S3. **Code:** Document loader avec support local et S3. **Critères:** Chargement depuis les 2 sources,Étape 4 – Couche RAG,À faire,Low,2,ai backend,apps/api,8,
Sub-task,Découper en chunks,"Découper les documents en chunks cohérents pour la recherche sémantique (512 tokens, overlap 50). **Code:** SentenceSplitter ou TokenTextSplitter. **Critères:** Document découpé en chunks pertinents",Étape 4 – Couche RAG,À faire,Low,2,ai backend,apps/api,8,
Sub-task,Générer embeddings,"Générer des embeddings pour chaque chunk avec le modèle choisi (text-embedding-3-small). **Code:** OpenAIEmbedding. **Critères:** Embeddings générés, dimensions correctes (1536)",Étape 4 – Couche RAG,À faire,Low,2,ai backend,apps/api,8,
Task,4.3 Retriever pgvector,Configurer la recherche sémantique basée sur PostgreSQL + pgvector. **Fichier:** apps/api/core/rag/retriever.py,Étape 4 – Couche RAG,À faire,High,5,ai database backend,apps/api,8,4.2
Sub-task,Configurer PGVectorStore,"Configurer la table et l'accès pgvector pour stocker les embeddings. **Code:** PGVectorStore de LlamaIndex. **Critères:** Store configuré, connexion établie",Étape 4 – Couche RAG,À faire,Low,2,ai database,apps/api,8,
Sub-task,Valider similarité,"Valider une requête sémantique renvoyant des résultats pertinents (top_k=5). **Test:** Query test, vérifier results. **Critères:** Résultats retournés, scores de similarité cohérents",Étape 4 – Couche RAG,À faire,Low,2,ai tests,apps/api,8,
Sub-task,Filtrer par tenant,"Forcer un filtrage strict par tenant_id sur les résultats via metadata filters. **Code:** Filter sur metadata. **Critères:** Isolation testée, pas de leak",Étape 4 – Couche RAG,À faire,Low,1,ai security,apps/api,8,
Task,4.4 Option Qdrant,Proposer l'option Qdrant comme vector store et valider la migration depuis pgvector. **Référence:** VISION.md section Qdrant,Étape 4 – Couche RAG,À faire,High,8,ai infrastructure,apps/api,9,
Sub-task,Configurer service Qdrant,"Ajouter Qdrant en service docker-compose et définir URL et API key en configuration. **Service:** qdrant dans docker-compose.yml. **Critères:** Service démarré, API accessible",Étape 4 – Couche RAG,À faire,Low,2,ai infrastructure,tools,9,
Sub-task,Créer collections par tenant,"Créer une collection dédiée par tenant pour isoler les données. **Code:** QdrantVectorStore.create_collection. **Critères:** Collections tenant_a, tenant_b créées",Étape 4 – Couche RAG,À faire,Low,2,ai,apps/api,9,
Sub-task,Tester migration embeddings,"Exporter depuis pgvector, importer dans Qdrant et comparer la pertinence. **Script:** migrate_to_qdrant.py. **Critères:** Migration réussie, résultats comparables",Étape 4 – Couche RAG,À faire,Low,3,ai tests,apps/api,9,
Sub-task,Mesurer latence et coûts,Mesurer la latence moyenne et l'empreinte de stockage pour orienter le choix. **Benchmark:** 1000 queries sur chaque. **Critères:** Métriques documentées (pgvector vs Qdrant),Étape 4 – Couche RAG,À faire,Low,1,ai tests,apps/api,9,
Task,4.5 Génération avec sources,Assembler retrieve + generate pour produire une réponse sourcée. **Fichier:** apps/api/core/rag/query_engine.py,Étape 4 – Couche RAG,À faire,High,5,ai backend,apps/api,9,4.3
Sub-task,Construire prompt RAG,"Construire un prompt qui contraint la réponse aux documents fournis. **Prompt:** system message + context. **Critères:** Prompt template créé, variable context",Étape 4 – Couche RAG,À faire,Low,2,ai backend,apps/api,9,
Sub-task,Inclure extraits et scores,Inclure les extraits de contexte et scores dans la réponse pour audit. **Format:** JSON avec sources array. **Critères:** Réponse inclut sources avec scores,Étape 4 – Couche RAG,À faire,Low,2,ai backend,apps/api,9,
Sub-task,Gérer absence de réponse,Gérer les cas où la réponse n'est pas présente dans les documents. **Code:** Check if no relevant docs. **Critères:** Message 'No answer found in documents' retourné,Étape 4 – Couche RAG,À faire,Low,1,ai backend,apps/api,9,
Task,4.6 Modèle de données des documents,Créer les tables documents et chunks et index nécessaires. **Migration:** 004_rag_tables.py,Étape 4 – Couche RAG,À faire,High,3,database backend,apps/api,9,
Sub-task,Créer table documents,"Créer la table documents pour suivre statut, taille, type et métadonnées. **Colonnes:** id, tenant_id, filename, size, mime_type, status, metadata, created_at. **Critères:** Table créée avec index",Étape 4 – Couche RAG,À faire,Low,1,database,apps/api,9,
Sub-task,Créer table chunks,"Créer la table chunks avec colonne embedding de type vector. **Colonnes:** id, document_id, content, embedding vector(1536), metadata. **Critères:** Table créée, type vector utilisé",Étape 4 – Couche RAG,À faire,Low,1,database,apps/api,9,
Sub-task,Indexer embeddings,"Créer l'index ivfflat et valider les performances de recherche. **Index:** CREATE INDEX ON chunks USING ivfflat(embedding). **Critères:** Index créé, query <100ms",Étape 4 – Couche RAG,À faire,Low,1,database,apps/api,9,
Task,4.7 Tests ingestion multi-formats,"Valider l'ingestion et l'indexation des formats PDF, DOCX et TXT.",Étape 4 – Couche RAG,À faire,High,5,ai tests,apps/api,10,4.2
Sub-task,Indexer PDF de test,"Indexer un PDF de test et vérifier le nombre de chunks créés. **Fichier test:** sample.pdf (5 pages). **Critères:** PDF indexé, ~20 chunks créés",Étape 4 – Couche RAG,À faire,Low,2,ai tests,apps/api,10,
Sub-task,Indexer DOCX de test,"Indexer un DOCX de test et vérifier les métadonnées conservées. **Fichier test:** sample.docx. **Critères:** DOCX indexé, metadata (title, author) préservées",Étape 4 – Couche RAG,À faire,Low,2,ai tests,apps/api,10,
Sub-task,Indexer TXT de test,"Indexer un fichier TXT et valider la pipeline d'ingestion. **Fichier test:** sample.txt. **Critères:** TXT indexé, chunks cohérents",Étape 4 – Couche RAG,À faire,Low,1,ai tests,apps/api,10,
Task,4.8 Endpoints documents et query,"Exposer des endpoints pour uploader, lister et interroger les documents. **Fichier:** apps/api/api/v1/documents.py",Étape 4 – Couche RAG,À faire,High,5,backend ai,apps/api,10,4.5
Sub-task,Uploader un document,"Permettre l'upload d'un document et lancer l'indexation automatique. **Endpoint:** POST /api/v1/documents. **Critères:** Upload réussi, indexation lancée async",Étape 4 – Couche RAG,À faire,Low,2,backend,apps/api,10,
Sub-task,Interroger les documents,Permettre de poser une question et retourner une réponse sourcée. **Endpoint:** POST /api/v1/documents/query. **Critères:** Query retourne answer + sources,Étape 4 – Couche RAG,À faire,Low,2,backend ai,apps/api,10,
Sub-task,Lister les documents,"Permettre la liste des documents par tenant avec statut. **Endpoint:** GET /api/v1/documents. **Critères:** Liste paginée, filtrée par tenant",Étape 4 – Couche RAG,À faire,Low,1,backend,apps/api,10,
Task,4.9 Mesure qualité et latence,Mesurer la pertinence et la latence de la pipeline RAG pour définir un SLA.,Étape 4 – Couche RAG,À faire,High,5,ai tests,apps/api,10,4.8
Sub-task,Définir cas de test,Définir des questions de référence et réponses attendues pour l'évaluation. **Fichier:** tests/fixtures/rag_evaluation.json. **Critères:** 10+ Q&A de référence,Étape 4 – Couche RAG,À faire,Low,2,ai tests,apps/api,10,
Sub-task,Mesurer latence bout-en-bout,Mesurer la latence de retrieve + generate et comparer aux objectifs (<2s). **Benchmark:** 100 queries. **Critères:** Latence p95 <2s,Étape 4 – Couche RAG,À faire,Low,2,ai tests,apps/api,10,
Sub-task,Documenter résultats,Documenter les résultats et proposer des actions d'optimisation. **Document:** docs/rag-performance.md. **Critères:** Résultats documentés avec recommandations,Étape 4 – Couche RAG,À faire,Low,1,docs,docs,10,
Epic,Étape 5 – API Keys et Couche MCP,"Fournir une API MCP pour exposer des outils IA du backend utilisables par des applications tierces (N8N, Make, etc.). Le MCP est une interface du core, indépendante des extensions. Inclut également le système de gestion des clés API pour l'authentification machine à machine. **Référence:** API_KEYS.md",,À faire,High,,,backend ai,0,
Task,5.1 Registre MCP,Créer un registre interne permettant de déclarer des outils MCP via un décorateur Python. **Fichier:** apps/api/core/mcp/registry.py,Étape 5 – API Keys et Couche MCP,À faire,High,5,backend ai,apps/api,11,
Sub-task,Décorateur mcp_tool,"Créer le décorateur @mcp_tool pour déclarer des outils MCP. **Critères:** Décorateur @mcp_tool disponible, stockage des métadonnées",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,11,
Sub-task,Classe MCPRegistry,"Créer la classe centrale MCPRegistry pour gérer l'enregistrement des outils. **Critères:** Registry fonctionnel, outils enregistrés automatiquement",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,11,
Sub-task,Validation des paramètres,"Implémenter la validation des paramètres d'outils MCP. **Critères:** Validation types, gestion erreurs, messages clairs",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,11,
Task,5.2 Manifest MCP,"Exposer un manifest MCP listant les outils disponibles, compatible avec la spec MCP. **Endpoint:** GET /mcp/manifest",Étape 5 – API Keys et Couche MCP,À faire,High,3,backend ai,apps/api,11,5.1
Sub-task,Serializer du manifest,Créer le serializer pour générer le manifest au format MCP. **Critères:** Format JSON conforme spec MCP,Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,11,
Sub-task,Endpoint GET /mcp/manifest,"Exposer l'endpoint pour récupérer le manifest des outils disponibles. **Critères:** Endpoint accessible, liste complète des outils",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,11,
Sub-task,Tests unitaires manifest,"Créer des tests pour valider le format et le contenu du manifest. **Critères:** Tests passants, couverture >80%",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend tests,apps/api,11,
Task,5.3 Endpoint d'appel d'outils MCP,Créer le point d'entrée pour exécuter un outil MCP. **Endpoint:** POST /mcp/call,Étape 5 – API Keys et Couche MCP,À faire,High,5,backend ai,apps/api,11,5.1
Sub-task,Structure de requête,"Définir le schéma de requête pour appeler un outil MCP. **Critères:** Schema Pydantic avec validation, documentation OpenAPI",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,11,
Sub-task,Gestion erreurs / exceptions,"Implémenter la gestion robuste des erreurs lors de l'exécution d'outils. **Critères:** Erreurs catchées, messages clairs, codes HTTP appropriés",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,11,
Sub-task,Tests d'exécution,"Créer des tests end-to-end pour l'appel d'outils MCP. **Critères:** Tests pour cas nominal et erreurs, couverture complète",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend tests,apps/api,11,
Task,5.4 Outils MCP de base,Créer un ensemble d'outils internes utiles pour les applications tierces et marketplace.,Étape 5 – API Keys et Couche MCP,À faire,High,13,backend ai,apps/api,12,5.3
Sub-task,summarize_text,"Créer l'outil MCP pour résumer du texte. **Permission:** analyze. **Critères:** Outil fonctionnel, testé, documenté",Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend ai,apps/api,12,
Sub-task,rag_query,Créer l'outil MCP pour interroger la base de connaissances RAG. **Permission:** read. **Critères:** Requête RAG fonctionnelle avec sources,Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend ai,apps/api,12,4.8
Sub-task,analyze_pdf,"Créer l'outil MCP pour analyser un document PDF. **Permission:** analyze. **Critères:** Extraction contenu, métadonnées",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend ai,apps/api,12,
Sub-task,list_documents,"Créer l'outil MCP pour lister les documents d'un tenant. **Permission:** read. **Critères:** Liste paginée, filtrée par tenant",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,12,
Sub-task,get_usage_ia,"Créer l'outil MCP pour récupérer les statistiques d'usage IA. **Permission:** read. **Critères:** Stats tokens, coûts, latence",Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend ai,apps/api,12,3.3
Task,5.5 Permissions MCP,Ajouter des permissions dédiées aux outils MCP et les intégrer au système de permissions du core.,Étape 5 – API Keys et Couche MCP,À faire,High,5,backend security,apps/api,11,5.1
Sub-task,Définir permissions MCP,"Définir les permissions standards pour les outils MCP (read, write, analyze, delete). **Critères:** Permissions enregistrées dans le système",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,11,
Sub-task,Contrôles d'accès,"Implémenter les contrôles de permissions sur chaque appel MCP. **Critères:** Vérification avant exécution, erreurs 403 si manquant",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,11,
Sub-task,Tests de permissions,Créer des tests pour valider les contrôles d'accès. **Critères:** Tests pour accès autorisé et refusé,Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend tests,apps/api,11,
Task,5.6 Documentation MCP,"Documenter la spec MCP interne, les endpoints, les outils et comment en ajouter dans le core. **Dossier:** docs/mcp/",Étape 5 – API Keys et Couche MCP,À faire,High,5,docs,docs,13,5.4
Sub-task,docs/mcp/overview.md,"Créer la documentation générale du système MCP. **Contenu:** Architecture, concepts, flux. **Critères:** Doc complète et claire",Étape 5 – API Keys et Couche MCP,À faire,Low,2,docs,docs,13,
Sub-task,Exemples d'appel,"Créer des exemples d'utilisation des outils MCP. **Contenu:** Requêtes curl, exemples de réponses. **Critères:** 5+ exemples pratiques",Étape 5 – API Keys et Couche MCP,À faire,Low,2,docs,docs,13,
Sub-task,Schémas de flux MCP,"Créer des diagrammes illustrant les flux MCP. **Contenu:** Diagrammes de séquence, architecture. **Critères:** Flux clairement illustrés",Étape 5 – API Keys et Couche MCP,À faire,Low,1,docs,docs,13,
Task,5.7 Base de données et modèle API Keys,"Créer le schéma de base de données et les modèles SQLAlchemy pour stocker les API keys. **Référence:** API_KEYS.md section Schéma",Étape 5 – API Keys et Couche MCP,À faire,High,5,backend database security,apps/api,14,
Sub-task,Créer migration Alembic,"Créer la migration pour la table api_keys avec colonnes id, tenant_id, user_id, name, key_hash, permissions, created_at, last_used_at, ip_last_used, revoked_at. **Fichier:** migrations/versions/XXX_api_keys.py. **Critères:** Table créée avec indexes sur tenant_id, key_hash et revoked_at",Étape 5 – API Keys et Couche MCP,À faire,Low,2,database,apps/api,14,
Sub-task,Créer modèle SQLAlchemy,"Créer le modèle APIKey avec toutes les colonnes et relations. **Fichier:** apps/api/models/api_key.py. **Critères:** Modèle avec relations tenant et user, méthodes helper pour vérification",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend database,apps/api,14,
Sub-task,Créer schémas Pydantic,"Créer les schémas APIKeyCreate, APIKeyResponse, APIKeyUpdate pour validation. **Fichier:** apps/api/schemas/api_key.py. **Critères:** Schémas avec validation, champs optionnels gérés",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,14,
Task,5.8 Génération et hachage des clés,"Implémenter la génération sécurisée des API keys avec préfixe et hachage cryptographique. **Référence:** API_KEYS.md section Génération",Étape 5 – API Keys et Couche MCP,À faire,High,5,backend security,apps/api,14,5.7
Sub-task,Créer générateur de clés,"Créer la fonction generate_api_key avec préfixe sk_live_ et 32 caractères aléatoires sécurisés. **Fichier:** apps/api/core/auth/api_keys.py. **Lib:** secrets. **Critères:** Clés uniques, format sk_live_[32 chars]",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,14,
Sub-task,Implémenter hachage sécurisé,"Implémenter le hachage des clés avec bcrypt avant stockage. **Fonction:** hash_api_key, verify_api_key. **Lib:** passlib. **Critères:** Hash sécurisé, vérification fonctionnelle",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,14,
Sub-task,Valider unicité du hash,"Vérifier que le hash n'existe pas déjà en base avant création. **Critères:** Contrainte unique respectée, retry automatique si collision",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend database,apps/api,14,
Task,5.9 Authentification par API Key,"Implémenter le middleware d'authentification pour valider les API keys dans les requêtes. **Référence:** API_KEYS.md section Fonctionnement général",Étape 5 – API Keys et Couche MCP,À faire,High,8,backend security,apps/api,15,5.8
Sub-task,Créer dependency FastAPI,"Créer la dependency get_api_key pour extraire et valider la clé du header Authorization. **Fichier:** apps/api/core/auth/dependencies.py. **Critères:** Extraction Bearer token, validation format",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,15,
Sub-task,Implémenter vérification hash,"Vérifier le hash de la clé contre la base et charger les permissions. **Critères:** Hash vérifié, clé non révoquée, permissions chargées",Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend security,apps/api,15,
Sub-task,Mettre à jour métadonnées usage,"Mettre à jour last_used_at et ip_last_used à chaque utilisation. **Critères:** Timestamp et IP mis à jour automatiquement",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,15,
Sub-task,Gérer erreurs d'authentification,"Gérer les cas d'erreur (clé invalide, révoquée, expirée). **Critères:** Erreurs HTTP 401 avec messages clairs",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend security,apps/api,15,
Task,5.10 Système de permissions RBAC,"Intégrer les permissions des API keys avec le système RBAC existant. **Référence:** API_KEYS.md section Permissions associées",Étape 5 – API Keys et Couche MCP,À faire,High,5,backend security,apps/api,15,5.9
Sub-task,Créer vérificateur de permissions,"Créer la fonction check_api_key_permission pour vérifier les permissions avec support wildcards. **Fichier:** apps/api/core/auth/permissions.py. **Critères:** Wildcards * supportés, permissions hiérarchiques",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,15,
Sub-task,Créer dependency requires_permission,"Créer la dependency requires_permission pour protéger les endpoints. **Critères:** Dependency réutilisable, erreur 403 si permission manquante",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,15,
Sub-task,Valider isolation par tenant,"Vérifier que les permissions sont isolées par tenant_id. **Tests:** test_api_key_permissions.py. **Critères:** Pas de fuite cross-tenant, isolation validée",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend security tests,apps/api,15,
Task,5.11 Endpoints API CRUD,"Créer les endpoints REST pour gérer les API keys (création, liste, révocation, suppression). **Fichier:** apps/api/api/v1/api_keys.py",Étape 5 – API Keys et Couche MCP,À faire,High,8,backend,apps/api,16,5.10
Sub-task,Endpoint POST /api-keys,"POST /api-keys pour créer une nouvelle clé avec nom et permissions. **Critères:** Clé générée retournée en clair une seule fois, hash stocké",Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend,apps/api,16,
Sub-task,Endpoint GET /api-keys,"GET /api-keys pour lister toutes les clés du tenant avec métadonnées. **Critères:** Liste paginée, clé masquée (sk_live_***), métadonnées complètes",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,16,
Sub-task,Endpoint PATCH /api-keys/{id},"PATCH /api-keys/{id} pour modifier nom et permissions. **Critères:** Modification nom et permissions, hash non modifiable",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,16,
Sub-task,Endpoint DELETE /api-keys/{id},"DELETE /api-keys/{id} pour révoquer ou supprimer une clé. **Query param:** ?soft=true pour révocation. **Critères:** Suppression définitive ou révocation",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,16,
Task,5.12 Audit et traçabilité,"Créer le système d'audit pour tracer l'utilisation des API keys. **Référence:** API_KEYS.md section Audit et traçabilité",Étape 5 – API Keys et Couche MCP,À faire,High,5,backend security,apps/api,16,5.9
Sub-task,Créer table audit_logs,"Créer la table api_key_audit_logs pour tracer les accès. **Migration:** XXX_api_key_audit.py. **Colonnes:** id, api_key_id, endpoint, method, status_code, ip, created_at. **Critères:** Table avec indexes",Étape 5 – API Keys et Couche MCP,À faire,Low,2,database,apps/api,16,
Sub-task,Middleware d'audit,"Créer le middleware pour logger automatiquement chaque requête avec API key. **Critères:** Logs créés automatiquement, async pour performance",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,16,
Sub-task,Endpoint GET /api-keys/{id}/logs,"GET /api-keys/{id}/logs pour consulter l'historique d'utilisation. **Critères:** Liste paginée avec filtres date, status, endpoint",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,16,
Task,5.13 Interface admin - Liste et gestion,"Créer la page admin pour lister et gérer les API keys. **Dossier:** apps/admin/app/settings/api-keys/",Étape 5 – API Keys et Couche MCP,À faire,High,8,frontend,apps/admin,17,5.11
Sub-task,Page liste API keys,"Afficher la table des API keys avec colonnes nom, permissions, dernière utilisation, statut. **Page:** apps/admin/app/settings/api-keys/page.tsx. **Critères:** Table avec recherche, filtres, pagination",Étape 5 – API Keys et Couche MCP,À faire,Low,3,frontend,apps/admin,17,
Sub-task,Affichage des permissions,"Afficher les permissions sous forme de badges avec icônes. **Critères:** Badges colorés, tooltip avec détails",Étape 5 – API Keys et Couche MCP,À faire,Low,1,frontend,apps/admin,17,
Sub-task,Actions rapides,"Ajouter actions copier ID, révoquer, supprimer avec confirmations. **Critères:** Actions avec modals de confirmation",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,17,
Sub-task,Indicateurs d'usage,"Afficher indicateurs visuels (dernière utilisation, nb requêtes). **Critères:** Couleurs selon ancienneté, stats visibles",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,17,
Task,5.14 Interface admin - Création de clé,"Créer le modal de création de nouvelle API key avec affichage unique de la clé. **Référence:** API_KEYS.md section Gestion dans l'admin UI",Étape 5 – API Keys et Couche MCP,À faire,High,8,frontend,apps/admin,17,5.13
Sub-task,Modal formulaire création,"Créer le modal avec champs nom, propriétaire optionnel, sélecteur de permissions. **Critères:** Form validé, permissions multi-select",Étape 5 – API Keys et Couche MCP,À faire,Low,3,frontend,apps/admin,17,
Sub-task,Sélecteur de permissions,"Créer le composant de sélection de permissions avec catégories et wildcards. **Critères:** Arbre de permissions, wildcards supportés, validation",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,17,
Sub-task,Modal affichage clé générée,"Afficher la clé brute dans un modal sécurisé avec bouton copier et warning. **Critères:** Clé affichée une fois, copie clipboard, warning claire",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,17,
Sub-task,Validation et erreurs,"Gérer les erreurs de création et validation côté client. **Critères:** Messages d'erreur clairs, validation temps réel",Étape 5 – API Keys et Couche MCP,À faire,Low,1,frontend,apps/admin,17,
Task,5.15 Interface admin - Détails et audit,"Créer la page de détails d'une API key avec historique d'utilisation. **Page:** apps/admin/app/settings/api-keys/[id]/page.tsx",Étape 5 – API Keys et Couche MCP,À faire,High,8,frontend,apps/admin,18,5.12
Sub-task,Page détails clé,"Afficher toutes les informations de la clé (nom, créée le, dernière utilisation, permissions). **Critères:** Toutes métadonnées visibles, clé masquée",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,18,
Sub-task,Timeline d'utilisation,"Afficher la timeline des 50 dernières utilisations avec endpoint, status, IP. **Critères:** Timeline scrollable, filtres date",Étape 5 – API Keys et Couche MCP,À faire,Low,3,frontend,apps/admin,18,
Sub-task,Graphiques d'usage,"Afficher charts d'utilisation (requêtes par jour, endpoints utilisés). **Lib:** Recharts. **Critères:** 2+ charts, période configurable",Étape 5 – API Keys et Couche MCP,À faire,Low,2,frontend,apps/admin,18,
Sub-task,Actions de gestion,"Ajouter boutons modifier permissions, révoquer, réactiver, supprimer. **Critères:** Actions avec confirmations, feedback visuel",Étape 5 – API Keys et Couche MCP,À faire,Low,1,frontend,apps/admin,18,
Task,5.16 Tests et validation,"Créer les tests unitaires et d'intégration pour le système d'API keys. **Dossier:** apps/api/tests/",Étape 5 – API Keys et Couche MCP,À faire,High,8,backend tests security,apps/api,18,5.11
Sub-task,Tests génération et hachage,"Tester la génération de clés, l'unicité, le hachage et la vérification. **Fichier:** test_api_key_generation.py. **Critères:** 5+ tests passants, couverture >90%",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend tests,apps/api,18,
Sub-task,Tests authentification,"Tester l'authentification par API key (valide, invalide, révoquée). **Fichier:** test_api_key_auth.py. **Critères:** 8+ scénarios testés",Étape 5 – API Keys et Couche MCP,À faire,Low,3,backend tests security,apps/api,18,
Sub-task,Tests permissions RBAC,"Tester les permissions avec wildcards et isolation tenant. **Fichier:** test_api_key_rbac.py. **Critères:** Wildcards testés, isolation validée",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend tests security,apps/api,18,
Sub-task,Tests endpoints CRUD,"Tester tous les endpoints de gestion des API keys. **Fichier:** test_api_key_endpoints.py. **Critères:** CRUD complet testé, erreurs gérées",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend tests,apps/api,18,
Task,5.17 Documentation et exemples,"Créer la documentation complète pour l'utilisation des API keys avec exemples pratiques. **Dossier:** docs/",Étape 5 – API Keys et Couche MCP,À faire,High,5,docs,docs,18,5.11
Sub-task,Guide de démarrage rapide,"Créer un guide quick start pour créer et utiliser une API key. **Fichier:** docs/guides/api-keys-quickstart.md. **Critères:** Guide avec exemples curl, JavaScript",Étape 5 – API Keys et Couche MCP,À faire,Low,2,docs,docs,18,
Sub-task,Documentation permissions,"Documenter toutes les permissions disponibles et leur signification. **Fichier:** docs/api-keys-permissions.md. **Critères:** Liste exhaustive avec exemples",Étape 5 – API Keys et Couche MCP,À faire,Low,1,docs,docs,18,
Sub-task,Exemples intégrations,"Créer des exemples pour n8n, make, zapier, Scalar. **Dossier:** docs/examples/api-keys/. **Critères:** 4+ exemples pratiques",Étape 5 – API Keys et Couche MCP,À faire,Low,2,docs,docs,18,
Task,5.18 Rate limiting et quotas,"Implémenter le rate limiting et les quotas par API key pour prévenir les abus. **Fichier:** apps/api/core/rate_limit.py",Étape 5 – API Keys et Couche MCP,À faire,High,5,backend security,apps/api,19,5.9
Sub-task,Middleware rate limiting,"Créer le middleware de rate limiting par API key. **Lib:** slowapi ou Redis. **Critères:** Rate limit configurable par clé",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend security,apps/api,19,
Sub-task,Gestion des quotas,"Implémenter les quotas mensuels par API key (nb requêtes, tokens LLM). **Critères:** Quotas configurables, compteurs Redis",Étape 5 – API Keys et Couche MCP,À faire,Low,2,backend,apps/api,19,
Sub-task,Alertes dépassement,"Envoyer des alertes quand quota atteint 80% et 100%. **Critères:** Notifications envoyées, endpoint bloqué à 100%",Étape 5 – API Keys et Couche MCP,À faire,Low,1,backend,apps/api,19,
Epic,Étape 6 – Module Permissions & RBAC,"Implémenter un système de permissions avancé (RBAC v1.1) avec cache, hiérarchie, wildcards et audit trail. **Référence:** MODULE_PERMISSIONS.md",,À faire,High,,,backend security,0,
Task,6.1 Schéma DB permissions,"Créer les tables users, user_permissions, teams, permissions_audit. **Migration:** 005_permissions.py",Étape 6 – Module Permissions & RBAC,À faire,High,5,database backend,apps/api,12,2.2
Sub-task,Créer table users étendue,"Étendre la table users avec colonne role (super_admin, admin, manager, user, viewer). **Critères:** Table étendue, contrainte CHECK sur role",Étape 6 – Module Permissions & RBAC,À faire,Low,2,database,apps/api,12,
Sub-task,Créer table user_permissions,"Créer la table user_permissions (id, user_id, permission, granted_by, expires_at, conditions). **Critères:** Table créée avec FK et indexes",Étape 6 – Module Permissions & RBAC,À faire,Low,1,database,apps/api,12,
Sub-task,Créer table permissions_audit,"Créer la table permissions_audit pour tracer les changements. **Critères:** Table avec colonnes action, old_value, new_value, performed_by",Étape 6 – Module Permissions & RBAC,À faire,Low,1,database,apps/api,12,
Sub-task,Créer tables teams,"Créer les tables teams, user_teams, team_permissions pour gestion équipes. **Critères:** 3 tables créées avec relations correctes",Étape 6 – Module Permissions & RBAC,À faire,Low,1,database,apps/api,12,
Task,6.2 Middleware permissions,Créer le middleware avec cache TTL et hiérarchie implicite. **Fichier:** apps/api/core/permissions/middleware.py,Étape 6 – Module Permissions & RBAC,À faire,High,8,backend security,apps/api,12,6.1
Sub-task,Implémenter cache TTL,"Créer le système de cache en mémoire avec TTL 5min. **Fichier:** apps/api/core/permissions/cache.py. **Critères:** Cache fonctionnel, invalidation possible",Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,12,
Sub-task,Implémenter hiérarchie,Créer le système de hiérarchie implicite des permissions. **Fichier:** apps/api/core/permissions/hierarchy.py. **Critères:** Expansion automatique des permissions,Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,12,
Sub-task,Implémenter wildcards,"Créer la logique de matching avec wildcards (*). **Fonction:** has_permission. **Critères:** Wildcards fonctionnels, tests passants",Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,12,
Sub-task,Décorateur require_permission,"Créer le décorateur @require_permission pour protéger les endpoints. **Critères:** Décorateur fonctionnel, erreur 403 si permission manquante",Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,12,
Task,6.3 Service de gestion permissions,Créer le service pour assigner/révoquer permissions et tracer dans audit. **Fichier:** apps/api/core/permissions/service.py,Étape 6 – Module Permissions & RBAC,À faire,High,5,backend security,apps/api,13,6.2
Sub-task,Fonctions grant/revoke,Créer les fonctions pour accorder et révoquer des permissions. **Critères:** Fonctions avec invalidation cache et audit trail,Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,13,
Sub-task,Audit trail automatique,Enregistrer automatiquement chaque changement de permission. **Critères:** Log créé à chaque modification,Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend,apps/api,13,
Sub-task,Gestion expirations,Implémenter la logique de permissions temporaires avec expires_at. **Critères:** Permissions expirées non comptées,Étape 6 – Module Permissions & RBAC,À faire,Low,1,backend,apps/api,13,
Task,6.4 Tests unitaires permissions,Créer une suite de tests complète pour le module permissions. **Dossier:** apps/api/tests/permissions/,Étape 6 – Module Permissions & RBAC,À faire,High,5,backend tests,apps/api,13,6.3
Sub-task,Tests wildcards,"Tester tous les cas de wildcards (*.*.*, documents.*.own, etc.). **Critères:** 10+ tests passants",Étape 6 – Module Permissions & RBAC,À faire,Low,2,backend tests,apps/api,13,
Sub-task,Tests hiérarchie,Tester l'expansion automatique des permissions. **Critères:** Vérifier que delete.all → write.all → read.all,Étape 6 – Module Permissions & RBAC,À faire,Low,1,backend tests,apps/api,13,
Sub-task,Tests cache,"Tester le cache TTL et l'invalidation. **Critères:** Cache fonctionnel, invalidation testée",Étape 6 – Module Permissions & RBAC,À faire,Low,1,backend tests,apps/api,13,
Sub-task,Tests audit trail,Tester l'enregistrement des modifications. **Critères:** Logs créés pour chaque action,Étape 6 – Module Permissions & RBAC,À faire,Low,1,backend tests,apps/api,13,
Task,6.5 Interface admin permissions,Créer les pages admin pour gérer les utilisateurs et permissions. **Dossier:** apps/admin/app/permissions/,Étape 6 – Module Permissions & RBAC,À faire,High,8,frontend,apps/admin,13,6.3
Sub-task,Page liste utilisateurs,"Afficher la table des utilisateurs avec rôle et permissions. **Composants:** DataTable shadcn/ui. **Critères:** Liste paginée, recherche",Étape 6 – Module Permissions & RBAC,À faire,Low,3,frontend,apps/admin,13,
Sub-task,Modal édition utilisateur,"Créer le modal pour changer rôle et ajouter permissions custom. **Critères:** Form validé, mise à jour en temps réel",Étape 6 – Module Permissions & RBAC,À faire,Low,3,frontend,apps/admin,13,
Sub-task,Timeline audit,"Afficher l'historique des modifications de permissions. **Composant:** AuditTimeline. **Critères:** Chronologie visible, 5 derniers changements",Étape 6 – Module Permissions & RBAC,À faire,Low,2,frontend,apps/admin,13,
Epic,Étape 7 – Contexte Entreprise (Kernel),"Implémenter le système de contexte entreprise permanent et vectorisé, injecté dans tous les prompts IA. **Référence:** CONTEXTE_ENTREPRISE.md",,À faire,High,,,backend ai,0,
Task,7.1 Modèle de données contexte,Créer les tables pour stocker les blocs de contexte. **Migration:** 006_contexte_entreprise.py,Étape 7 – Contexte Entreprise (Kernel),À faire,High,5,database backend,apps/api,13,
Sub-task,Table blocs identité,"Créer la table context_identity_blocks (id, tenant_id, type, title, content, importance, order). **Critères:** Table créée avec indexes",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,database,apps/api,13,
Sub-task,Table vocabulaire,"Créer la table context_vocabulary (id, tenant_id, term, definition, category, synonyms, notes). **Critères:** Table avec index sur term",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,database,apps/api,13,
Sub-task,Table style,"Créer la table context_style (id, tenant_id, tone, presentation, writing_style, level). **Critères:** Une seule ligne par tenant",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,database,apps/api,13,
Sub-task,Table règles globales,"Créer la table context_rules (id, tenant_id, type, title, content, importance, applied_to, mode). **Critères:** Table avec statut actif/désactivé",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,database,apps/api,13,
Sub-task,Table vectorisation,Créer la table context_vectors pour stocker les embeddings du contexte. **Critères:** Colonne vector avec pgvector,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,database,apps/api,13,
Task,7.2 API backend contexte,Créer les endpoints CRUD pour gérer le contexte entreprise. **Fichier:** apps/api/api/v1/context.py,Étape 7 – Contexte Entreprise (Kernel),À faire,High,8,backend ai,apps/api,14,7.1
Sub-task,CRUD blocs identité,"Endpoints POST/GET/PUT/DELETE pour les blocs identité. **Critères:** CRUD complet, validation Pydantic",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend,apps/api,14,
Sub-task,CRUD vocabulaire,Endpoints pour gérer les termes du vocabulaire. **Critères:** CRUD avec import CSV/XLSX,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend,apps/api,14,
Sub-task,CRUD style,Endpoints pour configurer le style de communication. **Critères:** GET/PUT uniquement (une config par tenant),Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,backend,apps/api,14,
Sub-task,CRUD règles globales,Endpoints pour gérer les règles globales. **Critères:** CRUD avec activation/désactivation,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend,apps/api,14,
Sub-task,Endpoint vectorisation,"Endpoint POST /context/reindex pour relancer la vectorisation. **Critères:** Vectorisation async, statut retourné",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,backend ai,apps/api,14,
Task,7.3 Vectorisation et injection,Implémenter la vectorisation du contexte et son injection dans les prompts. **Fichier:** apps/api/core/context/injector.py,Étape 7 – Contexte Entreprise (Kernel),À faire,High,8,backend ai,apps/api,14,7.2
Sub-task,Vectoriser le contexte,"Vectoriser tous les blocs actifs du contexte dans un index dédié. **Critères:** Embeddings générés, stockés dans context_vectors",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,3,backend ai,apps/api,14,
Sub-task,Consolider le contexte,Créer une fonction qui consolide tout le contexte en texte formaté. **Critères:** Texte structuré avec ordre et importance,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend,apps/api,14,
Sub-task,Injecter dans prompts,Modifier le client LLM pour injecter automatiquement le contexte avant les instructions. **Critères:** Contexte toujours en premier,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,3,backend ai,apps/api,14,
Task,7.4 Interface admin contexte,Créer les pages admin pour gérer le contexte entreprise. **Dossier:** apps/admin/app/context/,Étape 7 – Contexte Entreprise (Kernel),À faire,High,13,frontend,apps/admin,15,7.2
Sub-task,Page vue d'ensemble,"Créer la page d'accueil avec résumé et indicateurs. **Critères:** Encart résumé, stats, état vectorisation",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,frontend,apps/admin,15,
Sub-task,Page identité,"Créer la page pour gérer les blocs identité (mission, vision, valeurs). **Critères:** Cards avec CRUD, drag & drop pour order",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,3,frontend,apps/admin,15,
Sub-task,Page vocabulaire,"Créer la page pour gérer le glossaire avec import CSV. **Critères:** Table avec filtres, import fonctionnel",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,3,frontend,apps/admin,15,
Sub-task,Page style,"Créer la page pour configurer le ton et le style. **Critères:** Form avec dropdowns, textarea, sauvegarde",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,frontend,apps/admin,15,
Sub-task,Page règles globales,"Créer la page pour gérer les règles des agents. **Critères:** Table avec toggle activation, CRUD",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,3,frontend,apps/admin,15,
Task,7.5 Tests contexte,Créer des tests pour valider l'injection et la vectorisation du contexte.,Étape 7 – Contexte Entreprise (Kernel),À faire,High,5,backend tests,apps/api,15,7.3
Sub-task,Tester vectorisation,"Vérifier que le contexte est bien vectorisé. **Critères:** Embeddings créés, dimensions correctes",Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend tests,apps/api,15,
Sub-task,Tester injection,Vérifier que le contexte est bien injecté dans les prompts. **Critères:** Contexte présent en premier,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,2,backend tests,apps/api,15,
Sub-task,Tester isolation tenant,Vérifier que le contexte est isolé par tenant. **Critères:** Pas de leak cross-tenant,Étape 7 – Contexte Entreprise (Kernel),À faire,Low,1,backend tests,apps/api,15,
Epic,Étape 8 – Mémoire IA (mem0),Implémenter le système de mémoire longue durée utilisateur avec mem0. **Référence:** MEMOIRE_BY_USER.md,,À faire,High,,,backend ai,0,
Task,8.1 Configuration mem0,Installer et configurer mem0 avec les backends (Postgres/Qdrant/Redis). **Référence:** MEMOIRE_BY_USER.md,Étape 8 – Mémoire IA (mem0),À faire,High,5,backend ai,apps/api,15,
Sub-task,Installer mem0,"Installer les dépendances mem0 et ses connecteurs. **Packages:** mem0, mem0-postgres, mem0-qdrant. **Critères:** Packages installés",Étape 8 – Mémoire IA (mem0),À faire,Low,1,backend ai,apps/api,15,
Sub-task,Configurer backend Postgres,"Configurer mem0 pour utiliser Postgres comme backend. **Critères:** Connexion établie, tables créées",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend database,apps/api,15,
Sub-task,Configurer backend Qdrant,"Configurer mem0 pour utiliser Qdrant (optionnel). **Critères:** Connexion établie, collections créées",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend ai,apps/api,15,
Task,8.2 Paramètres globaux mémoire,Créer l'API pour configurer les paramètres globaux de mémoire. **Fichier:** apps/api/api/v1/memory/settings.py,Étape 8 – Mémoire IA (mem0),À faire,High,8,backend ai,apps/api,16,8.1
Sub-task,API activation mémoire,"Endpoint pour activer/désactiver la mémoire globale. **Critères:** Switch fonctionnel, impact immédiat",Étape 8 – Mémoire IA (mem0),À faire,Low,1,backend,apps/api,16,
Sub-task,API modes mémoire,"Endpoints pour configurer les modes mem0 (conversationnelle, personnelle, contextuelle). **Critères:** Config sauvegardée",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,16,
Sub-task,API profondeur et consolidation,Endpoints pour configurer profondeur et politique de consolidation. **Critères:** Paramètres appliqués,Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,16,
Sub-task,API filtrage,Endpoints pour configurer le filtrage des mémoires. **Critères:** Règles de filtrage appliquées,Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,16,
Sub-task,API réglages embeddings,Endpoints pour configurer le modèle embeddings utilisé. **Critères:** Modèle changeable,Étape 8 – Mémoire IA (mem0),À faire,Low,1,backend ai,apps/api,16,
Task,8.3 Monitoring mémoire,Créer les endpoints pour monitorer l'usage de la mémoire. **Fichier:** apps/api/api/v1/memory/monitoring.py,Étape 8 – Mémoire IA (mem0),À faire,High,5,backend ai,apps/api,17,8.2
Sub-task,Métriques mémoire,"Endpoint GET /memory/metrics pour récupérer les stats. **Critères:** Nombre mémoires, taille, coût estimé",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,17,
Sub-task,Journal opérations,"Endpoint GET /memory/operations pour lister les opérations mem0. **Critères:** Table avec type, date, utilisateur",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,17,
Sub-task,Latence recherche,Endpoint pour mesurer la latence de recherche mémoire. **Critères:** Temps moyen de récupération,Étape 8 – Mémoire IA (mem0),À faire,Low,1,backend,apps/api,17,
Task,8.4 Maintenance mémoire,Créer les endpoints pour purger et exporter les mémoires. **Fichier:** apps/api/api/v1/memory/maintenance.py,Étape 8 – Mémoire IA (mem0),À faire,High,5,backend ai,apps/api,16,8.2
Sub-task,Purge partielle,"Endpoints pour purger les mémoires anciennes (30j, 90j, 6 mois). **Critères:** Purge avec confirmation",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,16,
Sub-task,Purge totale,Endpoint pour réinitialiser la mémoire complète. **Critères:** Double confirmation obligatoire,Étape 8 – Mémoire IA (mem0),À faire,Low,1,backend,apps/api,16,
Sub-task,Export mémoire,"Endpoint pour exporter les mémoires (JSON, CSV). **Critères:** Export fonctionnel, téléchargement",Étape 8 – Mémoire IA (mem0),À faire,Low,2,backend,apps/api,16,
Task,8.5 Interface admin mémoire,Créer les pages admin pour configurer et monitorer la mémoire. **Dossier:** apps/admin/app/memory/,Étape 8 – Mémoire IA (mem0),À faire,High,13,frontend,apps/admin,16,8.3
Sub-task,Page paramètres généraux,"Créer la page pour configurer les paramètres globaux. **Critères:** Switch activation, dropdowns modes, sliders",Étape 8 – Mémoire IA (mem0),À faire,Low,3,frontend,apps/admin,16,
Sub-task,Page configuration backend,Créer la page pour choisir le backend (Postgres/Qdrant/Redis). **Critères:** Cards avec stats par backend,Étape 8 – Mémoire IA (mem0),À faire,Low,3,frontend,apps/admin,16,
Sub-task,Page monitoring,"Créer le dashboard de monitoring avec charts. **Critères:** Charts Recharts, métriques temps réel",Étape 8 – Mémoire IA (mem0),À faire,Low,4,frontend,apps/admin,16,
Sub-task,Page maintenance,"Créer la page pour purger et exporter les mémoires. **Critères:** Boutons purge, export fonctionnel",Étape 8 – Mémoire IA (mem0),À faire,Low,3,frontend,apps/admin,16,
Epic,Étape 9 – Events, Notifications & Webhooks,"Implémenter le bus d'événements interne, les webhooks sortants et le SDK events. **Référence:** EVENTS_NOTIFS_WEBHOOK.md,",À faire,High,,,backend,0,
Task,9.1 Event bus interne,Implémenter le bus d'événements avec Redis Streams. **Fichier:** apps/api/core/events/bus.py,"Étape 9 – Events, Notifications & Webhooks",À faire,High,8,backend infrastructure,apps/api,17,
Sub-task,Connexion Redis Streams,"Configurer la connexion à Redis Streams pour le bus. **Critères:** Connexion établie, stream créé","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend infrastructure,apps/api,17,
Sub-task,Publisher événements,Créer la fonction publish() pour émettre des événements. **Critères:** Events publiés dans Redis,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Sub-task,Subscriber événements,Créer la fonction subscribe() pour écouter des événements. **Critères:** Consumer groups fonctionnels,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Sub-task,Schemas événements,"Créer les schemas Pydantic pour les événements (document.*, conversation.*, etc.). **Critères:** 20+ événements définis","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Task,9.2 Registry webhooks,Créer le système de registry pour gérer les webhooks sortants. **Fichier:** apps/api/core/webhooks/registry.py,"Étape 9 – Events, Notifications & Webhooks",À faire,High,5,backend,apps/api,17,9.1
Sub-task,Table webhooks,"Créer la table webhooks (id, tenant_id, url, secret, events, is_active, retry_config). **Critères:** Table créée","Étape 9 – Events, Notifications & Webhooks",À faire,Low,1,database,apps/api,17,
Sub-task,API CRUD webhooks,Créer les endpoints POST/GET/PUT/DELETE /webhooks. **Critères:** CRUD complet avec validation,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Sub-task,Matching événements,Créer la logique de matching événements → webhooks (avec wildcards). **Critères:** Wildcards fonctionnels,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Task,9.3 Notification engine,Créer le moteur de notification qui dispatch les événements. **Fichier:** apps/api/core/events/engine.py,"Étape 9 – Events, Notifications & Webhooks",À faire,High,8,backend,apps/api,17,9.2
Sub-task,Workers asynchrones,"Créer les workers Celery/ARQ pour traiter les événements. **Critères:** Workers démarrés, queues séparées","Étape 9 – Events, Notifications & Webhooks",À faire,Low,3,backend,apps/api,17,
Sub-task,Dispatcher webhooks,"Créer la logique de dispatch vers les webhooks HTTP. **Critères:** POST signé HMAC, retry logic","Étape 9 – Events, Notifications & Webhooks",À faire,Low,3,backend,apps/api,17,
Sub-task,Dead letter queue,"Créer la DLQ pour les événements échoués. **Critères:** Events en échec sauvegardés, rejouables","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,17,
Task,9.4 Channels de livraison,Implémenter les channels WebSocket SSE et HTTP webhooks. **Fichier:** apps/api/core/events/channels/,"Étape 9 – Events, Notifications & Webhooks",À faire,High,8,backend,apps/api,18,9.3
Sub-task,WebSocket SSE,"Créer l'endpoint GET /events/stream pour streaming temps réel. **Critères:** SSE fonctionnel, events en temps réel","Étape 9 – Events, Notifications & Webhooks",À faire,Low,3,backend,apps/api,18,
Sub-task,HTTP webhooks,"Implémenter l'envoi HTTP POST avec signature HMAC. **Headers:** X-Webhook-Signature, X-Webhook-Timestamp. **Critères:** Signature vérifiable","Étape 9 – Events, Notifications & Webhooks",À faire,Low,3,backend security,apps/api,18,
Sub-task,Retry strategy,"Implémenter la stratégie de retry (immédiat, 1min, 5min, 15min, 1h). **Critères:** Retry automatique avec backoff","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Task,9.5 SDK events,Créer les endpoints pour permettre aux développeurs de créer et utiliser des événements custom. **Fichier:** apps/api/api/v1/events.py,"Étape 9 – Events, Notifications & Webhooks",À faire,High,8,backend,apps/api,18,9.1
Sub-task,Endpoint define,"POST /events/define pour déclarer un événement custom. **Critères:** Event enregistré, visible dans catalog","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Sub-task,Endpoint emit,POST /events/emit pour émettre un événement custom. **Critères:** Event émis dans le bus,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Sub-task,Endpoint subscribe,"POST /webhooks pour s'abonner à des événements. **Critères:** Webhook créé, matching fonctionnel","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Sub-task,Endpoint GET events,GET /events pour lister les événements disponibles. **Critères:** Catalog complet avec core + custom,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Task,9.6 Monitoring events,Créer le monitoring et l'observabilité du système d'événements. **Fichier:** apps/api/core/events/monitoring.py,"Étape 9 – Events, Notifications & Webhooks",À faire,High,5,backend devops,apps/api,18,9.3
Sub-task,Métriques Prometheus,"Exposer les métriques événements dans /metrics. **Métriques:** events_published, webhooks_delivered, latency. **Critères:** Métriques exposées","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend devops,apps/api,18,
Sub-task,Logs structurés,"Journaliser tous les événements avec payload. **Critères:** Logs JSON avec id, type, tenant, status","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,backend,apps/api,18,
Sub-task,Alertes,Configurer des alertes sur taux d'échec et saturation. **Critères:** Alertes configurées dans Prometheus,"Étape 9 – Events, Notifications & Webhooks",À faire,Low,1,devops,tools,18,
Task,9.7 Interface admin webhooks,Créer les pages admin pour gérer les webhooks et voir les logs. **Dossier:** apps/admin/app/webhooks/,"Étape 9 – Events, Notifications & Webhooks",À faire,High,8,frontend,apps/admin,19,9.2
Sub-task,Page liste webhooks,"Afficher la table des webhooks avec statut. **Critères:** Table avec filtres, toggle activation","Étape 9 – Events, Notifications & Webhooks",À faire,Low,3,frontend,apps/admin,19,
Sub-task,Modal création webhook,"Créer le modal pour créer/éditer un webhook. **Critères:** Form avec URL, events, secret HMAC","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,frontend,apps/admin,19,
Sub-task,Page logs webhooks,"Afficher les logs de livraison par webhook. **Critères:** Table avec status, retry count, timestamp","Étape 9 – Events, Notifications & Webhooks",À faire,Low,2,frontend,apps/admin,19,
Sub-task,Bouton test webhook,"Ajouter un bouton pour tester un webhook. **Endpoint:** POST /webhooks/{id}/test. **Critères:** Test fonctionnel, résultat affiché","Étape 9 – Events, Notifications & Webhooks",À faire,Low,1,frontend backend,apps/admin,19,
Epic,Étape 10 – Intégrations & Connecteurs,"Implémenter le framework de connecteurs génériques avec OAuth2 unifié et connecteurs de base. **Référence:** INTEGRATIONS.md, INTEGRATIONS_AUTH.md",,À faire,High,,,backend,0,
Task,10.1 Framework connecteurs,Créer le framework BaseConnector et les modules de base. **Dossier:** integrations/base/,Étape 10 – Intégrations & Connecteurs,À faire,High,8,backend,integrations,19,
Sub-task,Classe BaseConnector,"Créer la classe BaseConnector avec méthodes connect, pull, normalize, sync. **Critères:** Classe abstraite complète",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,backend,integrations,19,
Sub-task,Module scheduler,Créer le scheduler pour lancer les syncs selon fréquence. **Lib:** Celery beat. **Critères:** Tasks planifiées,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend,integrations,19,
Sub-task,Module sync_state,"Créer le module pour stocker le state de sync (cursor, last_sync). **Critères:** State persisté en DB",Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,19,
Sub-task,Module normalizer,Créer le normalizer pour transformer en DocumentEnvelope. **Critères:** Format uniforme,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,19,
Sub-task,Module logger,Créer le logger pour tracer les erreurs et syncs. **Critères:** Logs structurés,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,19,
Task,10.2 Module OAuth2 unifié,Créer le module OAuth2 générique avec Authlib et Fernet. **Dossier:** integrations/base/oauth/,Étape 10 – Intégrations & Connecteurs,À faire,High,8,backend security,integrations,19,10.1
Sub-task,Classe OAuthClient,"Créer la classe OAuthClient avec build_authorize_url, exchange_code, refresh_token. **Critères:** Classe complète",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,backend security,integrations,19,
Sub-task,Module token_store,Créer le module pour stocker les tokens chiffrés avec Fernet. **Critères:** Tokens chiffrés en DB,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend security,integrations,19,
Sub-task,Module oauth_state,"Créer le module pour gérer state CSRF et PKCE. **Critères:** State sécurisé, expiration gérée",Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend security,integrations,19,
Sub-task,Gestion erreurs OAuth,"Implémenter la gestion des erreurs (invalid_grant, token_expired, etc.). **Critères:** Erreurs standardisées",Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,19,
Task,10.3 Connecteur Google Drive,Créer le connecteur Google Drive avec OAuth2 et sync incrémentale. **Dossier:** integrations/google-drive/,Étape 10 – Intégrations & Connecteurs,À faire,High,8,backend,integrations,20,10.2
Sub-task,Manifest Google Drive,Créer le manifest.json avec config OAuth et scopes. **Critères:** Manifest valide,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,20,
Sub-task,Implémentation connecteur,"Créer connector.py qui hérite de BaseConnector. **Critères:** Méthodes connect, pull, normalize implémentées",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,backend,integrations,20,
Sub-task,Sync incrémentale,Implémenter la sync incrémentale avec modifiedTime. **Critères:** Seuls nouveaux fichiers récupérés,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend,integrations,20,
Sub-task,Tests connecteur,"Créer des tests pour le connecteur Google Drive. **Critères:** Tests OAuth, sync, normalize",Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend tests,integrations,20,
Task,10.4 Connecteur Notion,Créer le connecteur Notion avec OAuth2 et sync pages. **Dossier:** integrations/notion/,Étape 10 – Intégrations & Connecteurs,À faire,High,8,backend,integrations,20,10.2
Sub-task,Manifest Notion,Créer le manifest.json avec config OAuth. **Critères:** Manifest valide,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,20,
Sub-task,Implémentation connecteur,"Créer connector.py avec sync pages Notion. **Critères:** Pages récupérées, normalisées",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,backend,integrations,20,
Sub-task,Sync databases,Implémenter la sync des databases Notion. **Critères:** Databases récupérées,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend,integrations,20,
Sub-task,Tests connecteur,"Créer des tests pour le connecteur Notion. **Critères:** Tests OAuth, sync, normalize",Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend tests,integrations,20,
Task,10.5 Connecteur Slack,Créer le connecteur Slack avec OAuth2 et sync messages. **Dossier:** integrations/slack/,Étape 10 – Intégrations & Connecteurs,À faire,High,8,backend,integrations,21,10.2
Sub-task,Manifest Slack,Créer le manifest.json avec config OAuth. **Critères:** Manifest valide,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,integrations,21,
Sub-task,Implémentation connecteur,Créer connector.py avec sync channels Slack. **Critères:** Messages récupérés,Étape 10 – Intégrations & Connecteurs,À faire,Low,3,backend,integrations,21,
Sub-task,Sync threads,Implémenter la sync des threads Slack. **Critères:** Threads récupérés avec contexte,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend,integrations,21,
Sub-task,Tests connecteur,"Créer des tests pour le connecteur Slack. **Critères:** Tests OAuth, sync, normalize",Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend tests,integrations,21,
Task,10.6 API et loader intégrations,Créer les endpoints pour gérer les intégrations et lancer les syncs. **Fichier:** apps/api/api/v1/integrations.py,Étape 10 – Intégrations & Connecteurs,À faire,High,5,backend,apps/api,21,10.3
Sub-task,Endpoints CRUD,POST/GET/PUT/DELETE /integrations pour gérer les intégrations. **Critères:** CRUD complet,Étape 10 – Intégrations & Connecteurs,À faire,Low,2,backend,apps/api,21,
Sub-task,Endpoint OAuth callback,POST /integrations/{service}/callback pour gérer le retour OAuth. **Critères:** Token stocké chiffré,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,apps/api,21,
Sub-task,Endpoint sync manuel,POST /integrations/{id}/sync pour lancer une sync manuelle. **Critères:** Sync lancée async,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,apps/api,21,
Sub-task,Endpoint statut,GET /integrations/{id}/status pour voir le statut de sync. **Critères:** Statut temps réel,Étape 10 – Intégrations & Connecteurs,À faire,Low,1,backend,apps/api,21,
Task,10.7 Interface admin intégrations,Créer les pages admin pour gérer les intégrations. **Dossier:** apps/admin/app/integrations/,Étape 10 – Intégrations & Connecteurs,À faire,High,13,frontend,apps/admin,22,10.6
Sub-task,Page catalogue intégrations,"Afficher le catalogue des intégrations disponibles avec cards. **Critères:** Cards avec logo, description, bouton connecter",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,frontend,apps/admin,22,
Sub-task,Page intégrations actives,"Afficher la liste des intégrations connectées avec statut. **Critères:** Table avec dernière sync, prochain run",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,frontend,apps/admin,22,
Sub-task,Page détail intégration,"Afficher les détails d'une intégration (config, logs, stats). **Critères:** Config éditable, logs visibles",Étape 10 – Intégrations & Connecteurs,À faire,Low,4,frontend,apps/admin,22,
Sub-task,Flux OAuth,"Implémenter le flux OAuth complet depuis l'admin. **Critères:** Popup OAuth, callback géré, token stocké",Étape 10 – Intégrations & Connecteurs,À faire,Low,3,frontend,apps/admin,22,
Epic,Étape 11 – Interface Admin Complète,"Finaliser l'interface admin avec toutes les fonctionnalités (dashboard, contexte, mémoire, webhooks, intégrations, permissions).",,À faire,High,,,frontend,0,
Task,11.1 Dashboard principal,Créer le dashboard principal avec vue d'ensemble de toutes les fonctionnalités. **Page:** apps/admin/app/page.tsx,Étape 11 – Interface Admin Complète,À faire,High,13,frontend,apps/admin,26,
Sub-task,Cards métriques globales,"Afficher les métriques clés (nb utilisateurs, documents, intégrations, coût IA). **Critères:** 6+ cards avec stats",Étape 11 – Interface Admin Complète,À faire,Low,3,frontend,apps/admin,26,
Sub-task,Charts usage IA,"Afficher les charts d'usage IA (tokens, coûts, latence). **Lib:** Recharts. **Critères:** 3+ charts temps réel",Étape 11 – Interface Admin Complète,À faire,Low,3,frontend,apps/admin,26,
Sub-task,Timeline activité récente,"Afficher la timeline des événements récents. **Critères:** 10 derniers events, temps réel via SSE",Étape 11 – Interface Admin Complète,À faire,Low,3,frontend,apps/admin,26,
Sub-task,Alertes et notifications,"Afficher les alertes système (quotas, erreurs, etc.). **Critères:** Alertes visibles, dismissables",Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,26,
Sub-task,Liens rapides,Ajouter des liens rapides vers les sections principales. **Critères:** Navigation rapide,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,26,
Task,11.2 Navigation et layout,Finaliser la navigation et le layout global de l'admin. **Fichier:** apps/admin/components/app-sidebar.tsx,Étape 11 – Interface Admin Complète,À faire,High,5,frontend,apps/admin,22,11.1
Sub-task,Menu de navigation complet,"Compléter le menu avec toutes les sections (Contexte, Mémoire, Webhooks, etc.). **Critères:** Menu structuré, icons",Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,22,
Sub-task,Breadcrumbs,Ajouter des breadcrumbs pour la navigation. **Critères:** Breadcrumbs sur toutes les pages,Étape 11 – Interface Admin Complète,À faire,Low,1,frontend,apps/admin,22,
Sub-task,Search globale,Ajouter une recherche globale (Cmd+K). **Lib:** cmdk. **Critères:** Recherche fonctionnelle,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,22,
Task,11.3 Gestion tenants,"Créer les pages pour gérer les tenants (liste, création, suspension). **Dossier:** apps/admin/app/tenants/",Étape 11 – Interface Admin Complète,À faire,High,8,frontend,apps/admin,23,
Sub-task,Page liste tenants,"Afficher la table des tenants avec statut et plan. **Critères:** Table paginée, recherche, filtres",Étape 11 – Interface Admin Complète,À faire,Low,3,frontend,apps/admin,23,
Sub-task,Modal création tenant,"Créer le modal pour créer un nouveau tenant. **Critères:** Form validé, tenant créé",Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,23,
Sub-task,Page détail tenant,"Afficher les détails d'un tenant (config, usage, stats). **Critères:** Toutes les infos visibles",Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,23,
Sub-task,Actions tenant,Ajouter les actions suspendre/activer/supprimer. **Critères:** Actions avec confirmation,Étape 11 – Interface Admin Complète,À faire,Low,1,frontend,apps/admin,23,
Task,11.4 Système de notifications,"Implémenter le système de notifications temps réel dans l'admin. **Lib:** Sonner, SSE",Étape 11 – Interface Admin Complète,À faire,High,5,frontend,apps/admin,23,9.4
Sub-task,Connexion SSE,Se connecter à /events/stream pour recevoir les events temps réel. **Critères:** SSE connecté,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,23,
Sub-task,Toasts notifications,Afficher des toasts pour les événements importants. **Lib:** Sonner. **Critères:** Toasts visibles,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend,apps/admin,23,
Sub-task,Centre de notifications,"Créer un centre de notifications (icône bell). **Critères:** Liste des notifs, mark as read",Étape 11 – Interface Admin Complète,À faire,Low,1,frontend,apps/admin,23,
Task,11.5 Tests E2E admin,Créer des tests E2E pour valider les principaux parcours admin. **Lib:** Playwright,Étape 11 – Interface Admin Complète,À faire,High,8,frontend tests,apps/admin,23,11.1
Sub-task,Tests authentification,Tester le flux de connexion/déconnexion. **Critères:** 3+ tests passants,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend tests,apps/admin,23,
Sub-task,Tests CRUD utilisateurs,Tester la création/édition/suppression d'utilisateurs. **Critères:** CRUD complet testé,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend tests,apps/admin,23,
Sub-task,Tests intégrations,Tester la connexion d'une intégration. **Critères:** Flux OAuth testé,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend tests,apps/admin,23,
Sub-task,Tests webhooks,Tester la création et le test d'un webhook. **Critères:** Webhook créé et testé,Étape 11 – Interface Admin Complète,À faire,Low,2,frontend tests,apps/admin,23,
Epic,Étape 12 – Sécurité, Observabilité et CI/CD,"Industrialiser la plateforme avec MFA, monitoring, scans sécurité et CI/CD complet.,",À faire,High,,,security devops,0,
Task,12.1 MFA et rotation secrets,Mettre en place la double authentification et la rotation des secrets critiques.,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,8,security backend,apps/api,24,2.5
Sub-task,Activer MFA TOTP,"Permettre l'activation MFA TOTP et la vérification côté backend. **Lib:** pyotp. **Critères:** MFA activable, code TOTP vérifié","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,security backend,apps/api,24,
Sub-task,Gérer secret TOTP,"Générer un secret TOTP par utilisateur et stocker en sécurité (chiffré). **Critères:** Secret généré, QR code affiché","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security backend,apps/api,24,
Sub-task,Plan rotation secrets,"Mettre en place un plan de rotation périodique des secrets critiques. **Doc:** docs/security/secret-rotation.md. **Critères:** Process documenté, script de rotation","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,security docs,docs,24,
Task,12.2 Monitoring complet,"Mettre en place Prometheus, Grafana et Loki pour métriques et logs. **Dossier:** tools/monitoring/","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,8,devops,tools,24,
Sub-task,Exposer métriques API,Exposer des métriques HTTP et LLM via /metrics (Prometheus). **Lib:** prometheus-client. **Critères:** Endpoint /metrics actif,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,backend devops,apps/api,24,
Sub-task,Provisionner dashboards Grafana,"Créer des dashboards pour latence, erreurs, LLM, ressources. **Fichiers:** tools/monitoring/grafana/dashboards/. **Critères:** 3+ dashboards","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,devops,tools,24,
Sub-task,Définir alertes Prometheus,"Configurer des alertes sur erreurs, latence, ressources. **Fichier:** tools/monitoring/prometheus/alerts.yml. **Critères:** Alertes configurées","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,devops,tools,24,
Task,12.3 CI/CD complet,"Renforcer le pipeline CI/CD avec coverage, scans vulnérabilités. **Dossier:** .github/workflows/","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,8,devops security,root,25,1.7
Sub-task,Étendre pipeline tests,Étendre les tests avec couverture et publier les rapports. **Workflow:** Update ci.yml. **Critères:** Coverage report publié,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,devops tests,root,25,
Sub-task,Scanner dépendances,"Scanner les dépendances et remonter alertes (Safety, npm audit). **Workflow:** security.yml. **Critères:** Scan sur chaque PR","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,devops security,root,25,
Sub-task,Scanner images Docker,"Scanner les images construites (Trivy). **Workflow:** Add trivy scan. **Critères:** Images scannées, rapport publié","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,3,devops security,root,25,
Task,12.4 SAST/DAST,Automatiser les scans de sécurité statiques et dynamiques.,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,5,security devops,root,25,
Sub-task,Configurer SAST,"Configurer Bandit, Safety, Semgrep pour le backend. **Workflow:** sast.yml. **Critères:** SAST sur chaque PR","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security devops,root,25,
Sub-task,Configurer DAST,Configurer OWASP ZAP pour scanner l'API. **Workflow:** dast.yml. **Critères:** ZAP scan post-deploy staging,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security devops,root,25,
Sub-task,Publier rapports sécurité,Publier les rapports et notifier l'équipe. **Config:** Slack notification. **Critères:** Rapports publiés,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,1,security devops,root,25,
Task,12.5 PenTest interne,"Réaliser un test d'intrusion interne focalisé sur auth, SQLi, rate limit, CORS.","Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,8,security tests,apps/api,25,
Sub-task,Tester JWT tampering,Vérifier la robustesse de la validation JWT. **Test:** Modifier signature. **Critères:** Tokens modifiés rejetés,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security tests,apps/api,25,
Sub-task,Tester injections SQL,Tester plusieurs payloads d'injection. **Test:** Injection attempts. **Critères:** Toutes injections bloquées,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security tests,apps/api,25,
Sub-task,Tester rate limiting,Vérifier l'efficacité du rate limit. **Test:** Burst requests. **Critères:** 429 retourné,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security tests,apps/api,25,
Sub-task,Tester CORS,Vérifier que seule l'origine autorisée est acceptée. **Test:** Request unauthorized. **Critères:** CORS headers corrects,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,2,security tests,apps/api,25,
Task,12.6 Scans sécurité planifiés,Planifier des scans SAST et DAST récurrents et centraliser les rapports.,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,High,3,security devops,root,25,12.4
Sub-task,Planifier scans,Planifier des scans hebdomadaires et quotidiens. **Workflow:** Cron schedule. **Critères:** Scans automatiques configurés,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,1,security devops,root,25,
Sub-task,Centraliser résultats,Agréger les résultats dans un dashboard sécurité. **Tool:** GitHub Security. **Critères:** Dashboard avec historique,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,1,security,root,25,
Sub-task,Alerter sur critiques,Notifier immédiatement en cas de vulnérabilité critique. **Config:** PagerDuty/Slack. **Critères:** Alert envoyée <5min,"Étape 12 – Sécurité, Observabilité et CI/CD",À faire,Low,1,security devops,root,25,
